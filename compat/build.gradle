plugins {
	id 'com.github.johnrengelman.shadow' version '8.1.1'
}

dependencies {
	api project(path: ':client', configuration: 'namedElements')

	modImplementation libs.qfapi

	modCompileOnly libs.fabrictailor
	modCompileOnly libs.pehkui
	modCompileOnly libs.fabrication
	modCompileOnly libs.placeholder
	modCompileOnly libs.styledNicknames
	modCompileOnly libs.luaj
	modCompileOnly libs.figura
	modCompileOnly libs.cardinal
	modCompileOnly libs.calio
	modCompileOnly(libs.apoli) {
		exclude module: 'AdditionalEntityAttributes'
		exclude module: 'calio'
	}
	modCompileOnly(libs.origins) {
		exclude module: 'apoli'
	}
}

shadowJar {
	relocate 'org.quiltmc.config', 'folk.sisby.switchy.repackage.quiltconfig'
	dependencies {
		include dependency(libs.quiltConfig.get()) // idk how to make it not include this
	}
	minimize()
}

remapJar {
	dependsOn(shadowJar)
	input.set(shadowJar.archivePath)
}
